
已知模型：
student: sid sname sage ssex
teacher: tid tname
course: cid cname tid
sc: sid cid score

# 删除选修课成绩小于50分的学生选课记录
delete from sc t where t.score < 50 or t.score is null;

# 查询哪些没人选的课程号和课程名
--使用not exists替换not in
select a.cid, a.cname from course a where not exists (select 1 from sc b where b.cid = a.cid);

# 查询课程的课程名、选修人数和考试最高分
select cname, count(sid), max(score) from course a, sc b where a.cid = b.cid group by a.cid;

# 查询课程“c001”比课程“c002”成绩高的所有学生学号
select a.sid from sc a, sc b where a.sid=b.sid 
	and a.cid='c001' and b.cid='c002' and a.score > b.score;
或者
select a.sid from
	(select t.sid, t.score from sc t where t.cid='c001') a,
	(select t.sid, t.score from sc t where t.cid='c002') b
	where a.sid=b.sid and a.score > b.score;


# 查询选修了课程“c001”和“c002”的学生
select sid from sc where cid in ('c001', 'c002') group by sid having count(cid) = 2;

# 查询平均成绩大于60分的同学的学号、姓名和平均成绩
select a.sid, a.sname, b.avg_score from student a,
	(select t.sid, avg(t.score) avg_score from sc t group by t.sid having avg(t.score) > 60) b
	where a.sid=b.sid;

# 查询所有同学的学号、姓名、选课数、总成绩
select a.sid, a.sname, b.count_cid, b.sum_score from student a,
	(select t.sid, count(t.cid) count_cid, sum(t.score) sum_score from sc t group by sid) b
	where a.sid=b.sid;

# 查询两门以上不及格课程的同学学号和姓名
select a.sid, a.sname from student a where 
	exists (select 1 from sc b where b.score < 60 and b.sid = a.sid group by b.sid having count(b.cid) > 1);

# 查询各课程的选修人数(注：某些课程可能没人选)
select a.cid, a.cname, b.count_sid from course a
	left join (select t.cid, count(t.sid) count_sid from sc t group by cid) b on b.cid=a.cid;











